<!-- templates/contributor_intake.html — FULL SCRIPT (6–8 “fit extract” questions + staff/sales options) -->
{% extends "base.html" %}
{% block title %}Contributor Intake • Nautical Compass{% endblock %}

{% block content %}
<div class="card">
  <h2>Contributor Intake</h2>
  <p class="muted">
    Operators, builders, sales, staff — this routes you into the right rail.
    Multiple talents? Choose your <strong>primary</strong> lane here; you can list additional skills in “Assets/Notes”.
  </p>

  <form class="form" method="post" action="/contributor">

    <!-- Identity -->
    <label class="label">Name</label>
    <input name="name" required />

    <label class="label">Email</label>
    <input name="email" type="email" required />

    <div class="grid grid-2">
      <div>
        <label class="label">Phone (optional)</label>
        <input name="phone" />
      </div>
      <div>
        <label class="label">Company (optional)</label>
        <input name="company" />
      </div>
    </div>

    <label class="label">Website / Portfolio (optional)</label>
    <input name="website" placeholder="https://"/>

    <!-- Primary Role -->
    <label class="label">Primary role</label>
    <select name="primary_role" required>
      <option value="">Select…</option>
      <option>Sales / Growth</option>
      <option>Operations / Intake</option>
      <option>Product / Program</option>
      <option>Frontend</option>
      <option>Backend</option>
      <option>Data / DB</option>
      <option>DevOps / Deploy</option>
      <option>Security</option>
      <option>Hardware / Supply</option>
      <option>Capital / Sponsor</option>
      <option>Advisor / Specialist</option>
      <option>Not sure (route me)</option>
    </select>

    <!-- Track -->
    <label class="label">Contribution track</label>
    <select name="contribution_track" required>
      <option value="">Select…</option>
      <option value="sales_growth">Sales / Growth</option>
      <option value="ecosystem_staff">Ecosystem Staff (Intake/Ops/Client Success)</option>
      <option value="builder_operator">Builder / Operator</option>
      <option value="partner_vendor">Partner / Vendor</option>
      <option value="hardware_supply">Hardware / Supply</option>
      <option value="capital_sponsor">Capital / Sponsor</option>
      <option value="advisor_specialist">Advisor / Specialist</option>
      <option value="not_sure">Not sure</option>
    </select>

    <div class="grid grid-2">
      <div>
        <label class="label">Position interest (optional)</label>
        <input name="position_interest" placeholder="Sales staff, intake operator, builder, etc." />
      </div>
      <div>
        <label class="label">Comp plan (optional)</label>
        <input name="comp_plan" placeholder="residual, commission, hourly, revshare, etc." />
      </div>
    </div>

    <label class="label">Director owner (default Duece)</label>
    <input name="director_owner" value="Duece" />

    <!-- Assets + Regions -->
    <div class="grid grid-2">
      <div>
        <label class="label">Assets / Skills / Tools (optional)</label>
        <textarea name="assets" placeholder="List skills, tools, network, hardware, or advantages you bring…"></textarea>
      </div>
      <div>
        <label class="label">Regions (optional)</label>
        <textarea name="regions" placeholder="DMV, East Coast, remote, etc."></textarea>
      </div>
    </div>

    <div class="grid grid-2">
      <div>
        <label class="label">Capacity (optional)</label>
        <input name="capacity" placeholder="hours/week, availability, timeline" />
      </div>
      <div>
        <label class="label">Alignment (optional)</label>
        <input name="alignment" placeholder="why this mission fits you" />
      </div>
    </div>

    <label class="label">Message (optional)</label>
    <textarea name="message" placeholder="Anything we should know?"></textarea>

    <!-- FIT EXTRACT (6–8 questions) -->
    <details class="dropdown" open>
      <summary>Fit Extract (6–8 questions)</summary>
      <div class="dropdown-body">
        <label class="label">1) What access do you bring?</label>
        <select name="fit_access">
          <option value="">Select…</option>
          <option>Network / Community</option>
          <option>Enterprise contacts</option>
          <option>Hardware supply</option>
          <option>Execution capacity</option>
          <option>Capital / funding</option>
          <option>Skills only (no access)</option>
        </select>

        <label class="label">2) What do you want to build or grow?</label>
        <textarea name="fit_build_goal" placeholder="Be specific: subs, partnerships, a module, a region…"></textarea>

        <label class="label">3) What opportunity are you looking for?</label>
        <select name="fit_opportunity">
          <option value="">Select…</option>
          <option>Sales role</option>
          <option>Staff role</option>
          <option>Build/operator role</option>
          <option>Vendor partnership</option>
          <option>Sponsorship deal</option>
          <option>Not sure</option>
        </select>

        <label class="label">4) Authority level (decision power)</label>
        <select name="fit_authority">
          <option value="">Select…</option>
          <option value="owner_exec">Owner / Exec (final decision)</option>
          <option value="manager_influence">Manager / influence</option>
          <option value="partial">Partial</option>
          <option>None</option>
        </select>

        <label class="label">5) Preferred lane</label>
        <select name="fit_lane">
          <option value="">Select…</option>
          <option>Sales</option>
          <option>Staff/Ops</option>
          <option>Hardware</option>
          <option>Finance</option>
          <option>Build</option>
          <option>Security</option>
          <option>Product</option>
        </select>

        <label class="label">6) Non-negotiables / conditions</label>
        <textarea name="fit_no_conditions" placeholder="Schedule constraints, pay expectations, role boundaries…"></textarea>

        <label class="label">7) Visibility preference</label>
        <select name="fit_visibility">
          <option value="">Select…</option>
          <option>Front-facing</option>
          <option>Behind-the-scenes</option>
          <option>Either</option>
        </select>

        <label class="label">8) Why you?</label>
        <textarea name="fit_why_you" placeholder="What makes you the right fit for this rail?"></textarea>
      </div>
    </details>

    <details class="dropdown">
      <summary>Risk flags (instant)</summary>
      <div class="dropdown-body">
        <div id="contribFlags" class="muted">Select track + authority to see flags.</div>
      </div>
    </details>

    <div class="btnrow">
      <button class="btn btn-primary" type="submit">Submit Contributor</button>
      <a class="btn" href="/services">See Services</a>
    </div>
  </form>
</div>
{% endblock %}

{% block scripts %}
<script>
  const track = document.querySelector('select[name="contribution_track"]');
  const auth  = document.querySelector('select[name="fit_authority"]');
  const cap   = document.querySelector('input[name="capacity"]');
  const flagsBox = document.getElementById('contribFlags');

  function flags(){
    const f = [];
    const t = (track.value || "");
    const a = (auth.value || "");
    const c = (cap.value || "");

    if(!t) f.push("⚑ Track not chosen (routing uncertainty).");
    if(a === "owner_exec") f.push("✓ Decision authority = high leverage.");
    if(a === "partial") f.push("⚑ Partial authority (may need additional stakeholder).");
    if(!c) f.push("⚑ Capacity not stated (timelines unclear).");
    if(t === "sales_growth") f.push("⚑ Sales rail requires consistent follow-up + pipeline reporting.");
    if(t === "hardware_supply") f.push("⚑ Hardware supply rail requires region + lead time clarity.");
    if(t === "capital_sponsor") f.push("⚑ Capital rail requires term alignment + verification path.");
    flagsBox.innerHTML = f.length ? f.map(x => `<div>${x}</div>`).join("") : "No flags yet.";
  }

  track.addEventListener("change", flags);
  auth.addEventListener("change", flags);
  cap.addEventListener("input", flags);
  flags();
</script>
{% endblock %}
